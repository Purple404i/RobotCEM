# üèóÔ∏è RobotCEM System Architecture

RobotCEM is an interdisciplinary Computational Engineering Model (CEM) that automates the transition from natural language intent to a scientifically validated, simulated, and ready-to-manufacture robotic design.

## üîÑ The Design-Simulate-Fix Loop

The core innovation of RobotCEM is the automated feedback loop between a technical LLM, a geometry kernel, and a physics engine.

### 1. Intent Acquisition (Aurora LLM)
User input is processed by **Aurora**, a fine-tuned model with expertise in robotics, biology, and physics.
- **Output**: Structured JSON containing specifications, PicoGK C# code, and Blender Python simulation scripts.

### 2. Component Sourcing (Market Scraper)
The system identifies non-3D-printable parts (e.g., motors, sensors, biological reagents).
- **Tools**: Uses `duckduckgo-search` to find real-time pricing and availability.
- **Integration**: Feeds part dimensions and weights back into the geometry generation.

### 3. Geometry Generation (PicoGK & LEAP71)
The C# project in `csharp_runtime/` is compiled and executed.
- **Kernel**: PicoGK (voxel-based).
- **Libraries**: LEAP71 ShapeKernel (BaseShapes) and LatticeLibrary (complex infills).
- **Result**: High-fidelity STL file and physical metadata (mass, center of mass, moments of inertia).

### 4. Physics Simulation (Blender)
The generated STL is imported into a headless Blender instance.
- **Simulation**: Rigid body dynamics, stability checks, and stress approximations.
- **Verification**: Does the part tip over? Does it move as expected?

### 5. Scientific Analysis (Aurora Feedback)
Aurora receives the STL metadata and the Blender simulation results.
- **Reasoning**: "The center of mass is too high, causing instability during acceleration."
- **Auto-Fix**: Aurora suggests specific parameter updates (e.g., "increase base diameter by 20%").

### 6. Recursive Refinement
The loop repeats (up to 3 times) until the design passes all physics and simulation checks.

## üõ†Ô∏è Technology Stack

### Backend (Python/FastAPI)
- **Orchestrator**: Manages the state and flow between services.
- **Ollama Client**: Communicates with the local Aurora model.
- **Trimesh**: Analyzes STL files for physical properties.

### Geometry (C#/.NET)
- **PicoGK**: The primary geometry kernel.
- **ShapeKernel**: High-level abstractions for engineering shapes.

### Simulation (Blender)
- **Headless Mode**: Runs via CLI with custom Python scripts generated by the LLM.

### Frontend (React/Vite)
- **3D Preview**: Three.js-based STL visualization.
- **Studio Interface**: Real-time progress tracking and specification panels.

## üï∞Ô∏è Inactivity Monitoring
If a user is actively editing specifications but stops for 5 minutes, the **Inactivity Monitor** background task assumes the design is "ready for review" and automatically triggers the full Simulation and Analysis loop.

---

## üîí Security and Privacy
By using **Ollama** and **Local Blender**, RobotCEM ensures that your proprietary engineering designs never leave your infrastructure. No external API keys or cloud services are required for the core loop.
